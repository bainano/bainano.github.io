/* 深色模式样式 */
[data-theme="dark"] {
  /* 基础颜色变量 */
  --white: #111111;
  --black: #FFFFFF;
  --dark: #F5F5F5;
  --gray-1: #A0A0A0;
  --gray-2: #888888;
  --light: #333333;
  --lighter: #222222;
  --text-color: #F5F5F5;
  --headings-color: #FFFFFF;
  --link-color: #66B3FF;
  --link-color-hover: #FFFFFF;
  
  /* 确保图片和媒体内容在深色模式下的可见性 */
  --image-filter: brightness(0.9);
}

/* 系统级深色模式支持 */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    /* 基础颜色变量 */
    --white: #111111;
    --black: #FFFFFF;
    --dark: #F5F5F5;
    --gray-1: #A0A0A0;
    --gray-2: #888888;
    --light: #333333;
    --lighter: #222222;
    --text-color: #F5F5F5;
    --headings-color: #FFFFFF;
    --link-color: #66B3FF;
    --link-color-hover: #FFFFFF;
    
    /* 确保图片和媒体内容在深色模式下的可见性 */
    --image-filter: brightness(0.9);
  }
}

/* 深色模式下的图片处理 */
[data-theme="dark"] img:not(.no-dark-filter) {
  filter: var(--image-filter);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) img:not(.no-dark-filter) {
    filter: var(--image-filter);
  }
}

/* 主题切换按钮样式 */
.theme-toggle {
  background: none !important;
  border: none !important;
  cursor: pointer;
  padding: 0 !important;
  margin-left: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: none !important;
}

/* 确保主题切换按钮在深色模式下也没有背景 */
[data-theme="dark"] .theme-toggle {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* 确保主题切换按钮hover状态下也没有背景 */
.theme-toggle:hover,
[data-theme="dark"] .theme-toggle:hover {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
}

.theme-toggle svg {
  width: 1.2rem;
  height: 1.2rem;
  fill: var(--dark);
  transition: all 0.3s ease;
}

.theme-toggle:hover svg {
  fill: var(--color);
}

/* 主题切换动画 */
body {
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* 深色模式下的代码块样式调整 */
[data-theme="dark"] pre {
  background-color: #2d2d2d;
}

[data-theme="dark"] code {
  background-color: rgba(var(--color-rgb), 0.2);
}

/* 深色模式下的表格样式调整 */
[data-theme="dark"] table tr:nth-child(2n) {
  background: var(--light);
}

/* 深色模式下的表单元素样式调整 */
[data-theme="dark"] [type=email],
[data-theme="dark"] [type=number],
[data-theme="dark"] [type=search],
[data-theme="dark"] [type=tel],
[data-theme="dark"] [type=text],
[data-theme="dark"] [type=url],
[data-theme="dark"] select,
[data-theme="dark"] textarea {
  background-color: var(--lighter);
  border-color: var(--light);
  color: var(--text-color);
}

[data-theme="dark"] input[type=checkbox]+label:before,
[data-theme="dark"] input[type=radio]+label:before {
  background-color: var(--lighter);
  border-color: var(--light);
}

/* 深色模式下的按钮样式调整 */
[data-theme="dark"] .btn,
[data-theme="dark"] [type=button]:not(.filter__item),
[data-theme="dark"] [type=submit],
[data-theme="dark"] button:not(.filter__item):not(.theme-toggle) {
  background: var(--color);
  border-color: var(--color);
  color: var(--white);
}

[data-theme="dark"] .btn:hover,
[data-theme="dark"] [type=button]:not(.filter__item):hover,
[data-theme="dark"] [type=submit]:hover,
[data-theme="dark"] button:not(.filter__item):not(.theme-toggle):hover {
  background: var(--light);
  border-color: var(--light);
  color: var(--dark);
}

/* 确保filter按钮在深色模式下没有背景 */
[data-theme="dark"] .filter__item {
  background: none !important;
  border: none !important;
  color: var(--text-color);
  box-shadow: none !important;
}

/* 去掉navbar toggle box的背景 */
[data-theme="dark"] .navbar__toggle,
.navbar__toggle {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
}

[data-theme="dark"] .navbar__toggle-box,
.navbar__toggle-box {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* 修改汉堡菜单线条的颜色 */
[data-theme="dark"] .navbar .navbar__toggle-inner,
[data-theme="dark"] .navbar .navbar__toggle-inner::after,
[data-theme="dark"] .navbar .navbar__toggle-inner::before {
  background-color: var(--text-color) !important;
  height: 2px !important;
}

/* 确保浅色模式下汉堡菜单线条可见 */
.navbar .navbar__toggle-inner,
.navbar .navbar__toggle-inner::after,
.navbar .navbar__toggle-inner::before {
  background-color: var(--dark);
  height: 2px;
  width: 22px;
}

/* Giscus深色模式适配 */
[data-theme="dark"] .giscus-frame {
  background-color: var(--dark) !important;
  color: var(--text-color) !important;
}

[data-theme="dark"] .giscus {
  color-scheme: dark;
}

/* 确保giscus iframe在深色模式下使用深色主题 */
[data-theme="dark"] .giscus-frame {
  display: none;
}

[data-theme="dark"] .giscus-frame[data-theme="dark"] {
  display: block;
}

/* hover状态下也确保没有背景 */
[data-theme="dark"] .navbar__toggle:hover,
.navbar__toggle:hover,
[data-theme="dark"] .navbar__toggle-box:hover,
.navbar__toggle-box:hover,
[data-theme="dark"] .navbar__toggle-inner:hover,
.navbar__toggle-inner:hover {
  background: none !important;
  border: none !important;
  box-shadow: none !important;
}

[data-theme="dark"] .filter__item:hover,
[data-theme="dark"] .filter__item:focus {
  background: none !important;
  border: none !important;
  color: var(--gray-1);
  box-shadow: none !important;
}

[data-theme="dark"] .filter__item.is-active {
  color: var(--gray-1);
}

/* 深色模式下的卡片样式调整 */
[data-theme="dark"] .c-card__body--compact {
  background: rgba(17, 17, 17, 0.85);
}

/* 深色模式下的搜索覆盖层样式调整 */
[data-theme="dark"] .search__overlay {
  background-color: var(--lighter);
  box-shadow: 1px 0 18px rgba(0, 0, 0, 0.5);
}

/* 深色模式下的导航菜单样式调整 */
[data-theme="dark"] .navbar_mobile_overlay,
[data-theme="dark"] .navbar_mobile_sidebar {
  background: var(--lighter);
}

/* 深色模式下的页脚样式调整 */
[data-theme="dark"] .footer {
  border-top-color: var(--light);
}

/* 深色模式下的分隔符样式调整 */
[data-theme="dark"] .separator::before,
[data-theme="dark"] hr::before {
  color: var(--dark);
}

/* 深色模式下的引用样式调整 */
[data-theme="dark"] blockquote:before {
  color: var(--light);
}